package facebook4j;

import com.restfb.Connection;
import com.restfb.DefaultFacebookClient;
import com.restfb.FacebookClient;
import com.restfb.FacebookClient.AccessToken;
import com.restfb.types.Checkin;
import com.restfb.types.Page;
import com.restfb.types.Post;
import com.restfb.types.User;



public class howtouseapi {

	public static void main(String[] args) {
		// DefaultFacebookClient is the FacebookClient implementation
		// that ships with RestFB. You can customize it by passing in
		// custom JsonMapper and WebRequestor implementations, or simply
		// write your own FacebookClient instead for maximum control.

	//	FacebookClient facebookClient = new DefaultFacebookClient(MY_ACCESS_TOKEN);

		// It's also possible to create a client that can only access
		// publicly-visible data - no access token required. 
		// Note that many of the examples below will not work unless you supply an access token! 

		FacebookClient publicOnlyFacebookClient = new DefaultFacebookClient();

		// Get added security by using your app secret:

		String myaccesToken = "CAACEdEose0cBAHnZC4mC13ELOg3RhexK6Ro2jDXY7WxSb7iECLiYXTzoPy5hLMYMCz4byNWzadygUaliGXbN368rNVLf0uWSYrS5p084y5qsGk4mBYfAwbXwmMGZC0piFUQsGKo4VKaJzBnTUVXL2N7LeZCW9azfHuft4Q1Am0oZAsrQXXE0awj5TJb788iaXRm56ueZBewZDZD";
		
		FacebookClient facebookClient = new DefaultFacebookClient(myaccesToken);
		
		User user = facebookClient.fetchObject("me", User.class);
		Page page = facebookClient.fetchObject("Funspotter", Page.class);

		System.out.println("User name: " + user.getName());
		System.out.println("Page likes: " + page.getLikes());
		
		Connection<Checkin> mycheckin = facebookClient.fetchConnection("me/checkins", Checkin.class);
		//System.out.println("First item in my checkin: " + mycheckin.getData().get(0));
		
		for(int i=0; i<mycheckin.getData().size(); i++){
			System.out.println("First item in my checkin: " + mycheckin.getData().get(i).getMessage());
		}
		
		Connection<User> myFriends = facebookClient.fetchConnection("me/friends", User.class);
		Connection<Post> myFeed = facebookClient.fetchConnection("me/feed", Post.class);

		System.out.println("Count of my friends: " + myFriends.getData().size());
		System.out.println("First item in my feed: " + myFeed.getData().get(0));
		
		// Obtains an access token which can be used to perform Graph API operations
		// on behalf of an application instead of a user.

		String MY_APP_SECRET = "add4434d3f3f754d29d567d59f285be5";
		String MY_APP_ID = "513927361994826";
		AccessToken accessToken =
		  new DefaultFacebookClient().obtainAppAccessToken(MY_APP_ID, MY_APP_SECRET);

		System.out.println("My application access token: " + accessToken);
		
		
		FacebookClient facebookClient2 = new DefaultFacebookClient(myaccesToken, accessToken.getAccessToken());
		User user2 = facebookClient.fetchObject("me", User.class);
		Page page2 = facebookClient.fetchObject("Funspotter", Page.class);
		
		System.out.println("User name: " + user2.getName());
		System.out.println("Page likes: " + page2.getLikes());
		
	}

}
